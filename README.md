# Cloudflare Intelligence Dashboard

A world-class investigative dashboard for Cloudflare Product Managers, designed to complement an AI-powered intelligence delivery system. Built on **Cloudflare Workers**, **D1**, **Workers AI**, and **Workflows**.

## Features

- **Dashboard**: Volume over time charts, source mix analysis, and weekly AI insights (current week + last 2 weeks)
- **Feedbacks Page**: Deep investigation of raw feedback with filtering and grouping by source
- **Weekly AI Summaries**: Generated by Workers AI from D1 feedback; loading state while summaries are generated
- **Executive Summary**: Send monthly executive summaries by email via a Cloudflare Workflow (Resend)
- **Interactive Charts**: Click data points to navigate to related insights
- **Responsive Design**: Follows Cloudflare's design principles (clarity, performance, minimal chrome)

## Getting Started

### Prerequisites

- **Node.js 18+** and npm
- **Wrangler** (Cloudflare CLI): `npm install -g wrangler` or use `npx wrangler`
- A **Cloudflare account** (for deploy, D1, Workers AI, Workflows)


## Project Structure

```
cloudflare-intelligence/
├── src/
│   ├── components/
│   │   ├── VolumeChart.jsx
│   │   ├── SourceMixChart.jsx
│   │   ├── WeeklyInsights.jsx
│   │   └── SocialSourceIcon.jsx
│   ├── pages/
│   │   ├── Dashboard.jsx
│   │   └── Feedbacks.jsx
│   ├── services/
│   │   ├── mockData.js        # Fetches from /api/feedback
│   │   ├── dashboardData.js   # Metrics for charts
│   │   ├── weeklySummaries.js # Weekly AI summaries API
│   │   └── executiveSummary.js
│   ├── workflows/
│   │   └── ExecutiveSummaryWorkflow.js
│   ├── styles/
│   │   └── design-system.css
│   ├── worker.js              # Worker entrypoint (API + ASSETS)
│   ├── App.jsx
│   └── main.jsx
├── migrations/                # D1 schema (feedback, weekly_summaries, executive_summaries)
├── scripts/
│   ├── generate_mock_data.mjs # Generate mock_feedback.json
│   ├── seed_remote.mjs        # Seed remote D1 with mock data
│   └── seed.sql               # Optional bulk seed SQL
├── DEPLOY.md                  # Deployment checklist
├── DESIGN_SPECIFICATION.md
├── wrangler.toml              # Worker, D1, AI, Workflows config
└── package.json
```

## Design Principles

This dashboard follows Cloudflare's design language:

- **Clarity over cleverness**: Direct labels, no metaphors
- **Performance-first**: Minimal animations, fast loads
- **Minimal chrome**: No decorative elements
- **High information density**: More data, less visual noise
- **Typography-driven hierarchy**: Font weight, size, spacing create structure
- **Accessible by default**: WCAG AA contrast, clear focus states

## Key Interactions

### Dashboard

- **Filters**: The dashboard and feedbacks pages display filters for easy investigation by date period and source
- **Source Mix chart**: Click a segment → navigates to Feedbacks with that source filter
- **Weekly Insights**: "View details" → Feedbacks page, scrolled to that week
- **Weekly summaries**: Auto-generated (current week + last 2 weeks); loading state shown while AI runs

### Feedbacks Page

- **Send Executive Summary**: Button opens modal to pick month/year and email; sends via Workflow and Resend
- **Granularity / Category**: Change filters to narrow feedback; AI summaries only in Weekly + All view
- **Expand/collapse**: View full feedback content

## Data and APIs

- **Feedback** and **weekly summaries** are stored in **Cloudflare D1**. The Worker exposes:
  - `GET /api/feedback` – list feedback (with `from`, `to`, `source`)
  - `GET /api/metrics` – aggregated metrics for charts (daily/weekly/monthly)
  - `GET /api/weekly-summaries` – list AI summaries
  - `POST /api/weekly-summaries/generate` – generate/regenerate a weekly summary (Workers AI)
  - `GET /api/executive-summary/months` – months with feedback
  - `POST /api/executive-summary/send` – queue executive summary email (Workflow + Resend)
  - `GET /api/executive-summary/status/:id` – status of a summary job


## Browser Support

- Chrome, Firefox, Safari, Edge (last 2 versions)
